(function(){"use strict";var t={293:function(t,e,s){var a=s(144),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},r=[],i={mounted(){this.$store.dispatch("getProducts")}},n=i,c=s(1),u=(0,c.Z)(n,o,r,!1,null,null,null),d=u.exports,l=s(345),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("navigation"),t._m(0),t._m(1),s("div",{staticClass:"wrap"},[s("router-link",{attrs:{to:"/products"}},[s("button",[t._v("More")])])],1)],1)},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex"},[s("div",{staticClass:"side-image"}),s("div",{staticClass:"center-image"}),s("div",{staticClass:"side-image"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-two"},[s("article",[s("h2",[t._v(" Welcome to EraShop! ")]),s("p",[s("strong",[t._v("Internet eshop made by European students")]),t._v(' during the "Erasmus+ Musical Instruments Start-Up" project. You can expect nothing but '),s("strong",[t._v("musical instruments")]),t._v(" of all kinds here, and of course, every single one of them is handmade and created by one of the teams of students. The teams are made up of multiple students from "),s("b",[t._v("Czech Republic, Germany, France and Spain")]),t._v(", each with its own different role in the whole project. ")])])])}],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"itemDetail",params:{id:t.product._id}}}},[s("div",{staticClass:"itemBox"},[t.image?s("div",{staticClass:"img"},[s("img",{attrs:{src:""+t.image}})]):t._e(),s("p",[t._v(t._s(t.product.name))]),s("p",[t._v(t._s(t.product.price)+"€")]),0==t.product.quantity?s("p",{staticStyle:{color:"red"}},[t._v("Out of stock")]):t._e()])])},v=[],g=s(669),f=s.n(g),_={name:"itemBox",props:["product","index"],data(){return{image:null}},mounted(){this.product.name.replace(/\s+/g,"-").toLowerCase();this.image=`${f().defaults.baseURL}/image/${this.product._id}/0`}},k=_,$=(0,c.Z)(k,h,v,!1,null,"0929c41c",null),C=$.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navigation"},[s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"logo"},[t._v("EraShop")])]),s("div",{staticClass:"icons"},[s("router-link",{attrs:{to:t.kafka?"/account":"/signIn"}},[s("font-awesome-icon",{attrs:{icon:"fa-solid fa-user"}})],1),s("router-link",{attrs:{to:"/cart"}},[s("font-awesome-icon",{attrs:{icon:"fa-solid fa-cart-shopping"}})],1)],1)],1)},y=[],b={name:"navigation",computed:{kafka(){return this.$store.state.kafka},link(){return this.$store.state.link}}},L=b,x=(0,c.Z)(L,w,y,!1,null,"79324dee",null),E=x.exports,P=s(966),T=s.n(P),Z={name:"home",components:{navigation:E,carousel:T(),itemBox:C},computed:{products(){return this.$store.state.products}}},I=Z,O=(0,c.Z)(I,p,m,!1,null,"640870fe",null),B=O.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"products"},[s("navigation"),t._m(0),t.products&&1!=t.loading?s("div",{staticClass:"container"},[t._l(t.products,(function(t,e){return[s("itemBox",{key:t._id,attrs:{index:e,product:t}})]}))],2):s("loader")],1)},S=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"heading-content"},[s("h2",[t._v("Musical Instruments")]),s("p",[t._v("European students")])])}],j=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},A=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loader"},[s("div",{staticClass:"dot-spin"})])}],z={name:"loader"},N=z,D=(0,c.Z)(N,j,A,!1,null,"6d2c2bae",null),M=D.exports,U={name:"products",components:{navigation:E,itemBox:C,loader:M},computed:{products(){return this.$store.state.products},loading(){return this.$store.state.loading}}},Y=U,q=(0,c.Z)(Y,K,S,!1,null,"ed6613e2",null),F=q.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"itemDetail"},[s("navigation"),t.product&&1!=t.loading?s("div",{staticClass:"container"},[s("div",{staticClass:"product"},[t.image?s("img",{attrs:{src:""+t.image,alt:""}}):t._e()]),s("div",{staticClass:"product-stats"},[s("h1",[t._v(t._s(t.product.name))]),s("p",{staticClass:"price"},[t._v(" Price: "),s("strong",[t._v("$"+t._s(t.product.price))])]),s("p",{staticClass:"description"},[t._v("Description:")]),s("p",{staticClass:"description-data"},[t._v(t._s(t.product.description))]),s("p",{staticClass:"material"},[t._v(" Material: "),s("strong",[t._v(t._s(t.product.material))])]),s("p",{staticClass:"origin"},[t._v(" Country of origin: "),s("strong",[t._v(t._s(t.product.origin))])]),0==t.product.quantity?s("p",{staticStyle:{color:"red"}},[t._v("Out of stock")]):t._e(),s("div",{staticClass:"button-box"},[s("button",{attrs:{disabled:0==t.product.quantity},on:{click:function(e){return t.addToCart()}}},[t._v(" Add to cart ")])])])]):s("loader")],1)},G=[],H={name:"itemDetail",components:{navigation:E,loader:M},data(){return{image:null}},methods:{async addToCart(){console.log(this.$store.state.token),console.log(this.$store.state.product._id),await f().post("/user/cart/add",{_id:this.$store.state.product._id},{headers:{Authorization:`Bearer ${this.$store.state.token}`}})}},computed:{product(){return this.$store.state.product},loading(){return this.$store.state.loading}},mounted(){this.$store.dispatch("getProduct",this.$route.params.id),this.image=f().defaults.baseURL+"/image/"+this.$route.params.id+"/0",console.log(this.image)}},W=H,J=(0,c.Z)(W,R,G,!1,null,"9c87000a",null),Q=J.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signin"},[s("navigation"),1==this.$store.state.loader?s("loader"):1!=t.kafka?s("div",{staticClass:"container"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[s("div",{staticClass:"main"},[s("h1",[t._v("Sign in")]),s("p",[t._v("Username")]),s("label",{staticClass:"username",attrs:{for:"username"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"input",attrs:{type:"text",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("p",[t._v("Password")]),s("label",{attrs:{for:"password"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("p",{style:{color:t.color}},[t._v(t._s(t.message))]),s("div",{staticClass:"flex-one"},[s("input",{staticClass:"submit",attrs:{type:"submit",value:"Login"}})])]),s("p",[t._v("If you don't have an account, register "),s("a",{attrs:{href:""}},[t._v("here")])])])]):s("div",{staticClass:"signedIn"},[s("p",[t._v("You're already signed in!")]),s("div",{staticClass:"account"},[s("p",[t._v("Check out your ")]),s("router-link",{attrs:{to:"/account"}},[t._v("account")]),s("p",[t._v("!")])],1)])],1)},X=[],tt={name:"signin",components:{navigation:E,loader:M},data(){return{username:"",password:"",message:"",color:""}},computed:{kafka(){return this.$store.state.kafka}},methods:{async login(){this.$store.dispatch("setLoading",!0),await f().put("/login",{username:this.username,password:this.password}).then((t=>{200===t.status&&(this.$store.commit("setToken",t.data),this.$store.commit("setKafka",!0),this.$router.push("/account"))})).catch((t=>{this.$store.dispatch("setLoading",!1),this.color="red",console.log(t),this.message=t.response.data,this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0)}))}}},et=tt,st=(0,c.Z)(et,V,X,!1,null,"624f770c",null),at=st.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart"},[s("navigation"),void 0==this.cartError?s("div",{staticClass:"logged"},[1==this.cartLoading?s("loader"):this.cart!=[]||""!=this.cart||void 0!=this.cart||null!=this.cart||0!=this.cart.length||this.cart!={}?s("div",{staticClass:"container"},[s("h1",[t._v("Cart")]),s("div",{staticClass:"cartBox"},[t._l(this.cart,(function(e){return[s("div",{key:e._id,staticClass:"cartProduct"},[s("p",[t._v(t._s(e.name))]),s("div",{staticClass:"line"}),s("p",[t._v(t._s(e.quantity))]),s("div",{staticClass:"line"}),s("p",[t._v(t._s(e.price)+"€")]),s("button",{on:{click:function(s){return t.removeItem(e.name)}}},[s("font-awesome-icon",{attrs:{icon:"fa-solid fa-xmark"}})],1)])]})),s("button",{on:{click:function(e){return t.purchase()}}},[t._v("Purchase")])],2)]):s("div",{staticClass:"empty"},[s("p",[t._v("Your cart is empty!")]),s("div",{staticClass:"shopHere"},[s("p",[t._v("You can shop ")]),s("router-link",{attrs:{to:"/products"}},[t._v("here")]),s("p",[t._v("!")])],1)])],1):s("div",{staticClass:"notLogged"},[s("p",[t._v(t._s(t.cartError.message.name))]),s("div",{staticClass:"wrap"},[s("p",[t._v("Sign in ")]),s("router-link",{attrs:{to:"/signIn"}},[t._v("here")]),s("p",[t._v("!")])],1)])],1)},rt=[],it={name:"cart",components:{navigation:E,loader:M},data(){return{cart:void 0,cartLoading:!1,cartError:void 0}},async mounted(){this.cartLoading=!0,await f().get("/user/cart/",{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then((t=>{this.cartLoading=!1,0===t.data.length?this.cart=void 0:this.cart=t.data})).catch((t=>{401!==t.response.status&&403!==t.response.status||(this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0)),this.cartError=t.response.data,this.cartLoading=!1}))},methods:{async removeItem(t){this.cartLoading=!0,await f().post("/user/cart/remove",{itemName:t},{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then((async t=>{200===t.status&&(this.$store.dispatch("setLoading",!0),await f().get("/user/cart/data",{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then((t=>{200===t.status&&(this.cart=void 0,this.cart=t.data,this.cartLoading=!1,console.log(this.cart))})).catch((t=>{this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0),this.cartError=t.response.data,this.cartLoading=!1})))})).catch((t=>{this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0),this.cartError=t.response.data,this.cartLoading=!1}))},purchase(){this.$store.dispatch("setLoading",!0),f().post("/user/purchase",{},{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then((t=>{200===t.status&&(this.$store.dispatch("setLoading",!1),this.$store.dispatch("cart",[]))})).catch((t=>{this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0),this.$store.dispatch("setLoading",!1),this.cartError=t.response.data}))}}},nt=it,ct=(0,c.Z)(nt,ot,rt,!1,null,"6025f160",null),ut=ct.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account"},[s("navigation"),s("div",{staticClass:"accountwrap"},[1==this.$store.state.loading?s("loader"):1!=this.userLoading&&void 0!=this.user?s("div",{staticClass:"account-info"},[s("h1",[t._v("My Account")]),s("div",{staticClass:"account-box"},[s("p",[t._v("Username:")]),s("p",{staticClass:"account-parametr-stats"},[t._v(t._s(this.user.username))]),s("p",[t._v("Email:")]),s("p",{staticClass:"account-parametr-stats"},[t._v(t._s(this.user.email))]),s("p",[t._v("Ballance:")]),s("p",{staticClass:"account-parametr-stats"},[t._v(t._s(this.user.ballance)+" $Era")]),s("div",{staticClass:"account-out"},[s("button",{on:{click:function(e){return t.signOut()}}},[t._v("Sign out")])]),s("div",{staticClass:"line"}),this.user.ownedItems!==[]?s("div",[s("div",{staticClass:"account-center"},[s("h2",[t._v("Owned Items")])]),void 0!=this.user.ownedItems||""!=this.user.ownedItems||this.user.ownedItems!=[]?s("div",{staticClass:"account-owned"},[s("p",[t._v("Name:")]),t._l(this.user.ownedItems,(function(e){return s("p",{key:e.name},[t._v(" "+t._s(e.name)+" ")])}))],2):t._e()]):t._e()])]):s("div",{staticClass:"error"},[s("p",[t._v(t._s(this.userError))])])],1)],1)},lt=[],pt={name:"account",components:{navigation:E,loader:M},data(){return{user:void 0,userLoading:!1,userError:void 0}},methods:{signOut(){this.$store.dispatch("setToken",void 0),this.$store.commit("setKafka",!1),this.$router.push({path:"/signIn"})}},async mounted(){this.$store.dispatch("setLoading",!0),await f().get("/user",{headers:{Authorization:`Bearer ${this.$store.state.token}`}}).then((t=>{200===t.status?(this.user=t.data,this.$store.dispatch("setLoading",!1),console.log(t.data)):(this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0))})).catch((t=>{this.$store.commit("setKafka",!1),this.$store.commit("setToken",void 0),this.userError=t.response.data,this.$store.dispatch("setLoading",!1)}))}},mt=pt,ht=(0,c.Z)(mt,dt,lt,!1,null,"79973b44",null),vt=ht.exports;a.Z.use(l.Z);const gt=[{path:"/",name:"home",component:B},{path:"/products",name:"products",component:F},{path:"/signin",name:"signIn",component:at},{path:"/cart",name:"cart",component:ut},{path:"/account",name:"account",component:vt},{path:"/:id",name:"itemDetail",component:Q}],ft=new l.Z({base:"",routes:gt});var _t=ft,kt=s(629),$t=s(168);a.Z.use(kt.ZP);const Ct=new $t.ZP({storage:window.localStorage,reducer:t=>({token:t.token,kafka:t.kafka})});var wt=new kt.ZP.Store({state:{products:void 0,product:void 0,loading:!1,searchItemList:!1,nav:!1,kafka:!1,token:void 0},getters:{},mutations:{setProducts(t,e){t.products=e},setProduct(t,e){t.product=e},setKafka(t,e){t.kafka=e},setProductLoading(t,e){t.productLoading=e},setNav(t){t.nav=!t.nav},setToken(t,e){t.token=e}},actions:{async getProducts({commit:t}){t("setProductLoading",!0),await f().get("/stock/data").then((e=>{t("setProducts",e.data),setTimeout((()=>{t("setProductLoading",!1)}),500)}))},async getProduct({commit:t},e){t("setProductLoading",!0),t("setProduct",void 0),await f().get(`/stock/${e}`).then((e=>{t("setProduct",e.data),""===e.data||0===e.data.length?(t("setProductLoading",!1),router.push({name:"pageNotFound"})):(document.title=e.data.name,setTimeout((()=>{t("setProductLoading",!1)}),500))}),(t=>{console.log(t)}))},setKafka({commit:t},e){t("setKafka",e)},setToken({commit:t},e){t("setToken",e)},setLoading({commit:t},e){t("setProductLoading",e)}},modules:{},plugins:[Ct.plugin]}),yt=s(947),bt=s(810),Lt=s(436);a.Z.config.productionTip=!1,yt.vI.add(Lt.Y$T,Lt.Ljc,Lt.yYj,Lt.ILF,Lt.g82),a.Z.component("font-awesome-icon",bt.GN),f().defaults.baseURL="localhost"===window.location.hostname?"http://localhost:3000":"https://erasmustartup.eu/stock",a.Z.use(f()),new a.Z({router:_t,store:wt,render:t=>t(d)}).$mount("#app")}},e={};function s(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,o,r){if(!a){var i=1/0;for(d=0;d<t.length;d++){a=t[d][0],o=t[d][1],r=t[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(n=!1,r<i&&(i=r));if(n){t.splice(d--,1);var u=o();void 0!==u&&(e=u)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,o,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,r,i=a[0],n=a[1],c=a[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(c)var d=c(s)}for(e&&e(a);u<i.length;u++)r=i[u],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunkerashop"]=self["webpackChunkerashop"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(293)}));a=s.O(a)})();
//# sourceMappingURL=app.0a14528f.js.map